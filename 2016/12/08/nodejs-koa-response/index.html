<!doctype html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="koa,"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0"><meta name="description" content="Koa Response 对象是对 node 的 response 进一步抽象和封装，提供了日常 HTTP 服务器开发中一些有用的功能。"><meta property="og:type" content="article"><meta property="og:title" content="koa-响应(Response)"><meta property="og:url" content="http://yoursite.com/2016/12/08/nodejs-koa-response/index.html"><meta property="og:site_name" content="Mr.Hua's Blog"><meta property="og:description" content="Koa Response 对象是对 node 的 response 进一步抽象和封装，提供了日常 HTTP 服务器开发中一些有用的功能。"><meta property="og:updated_time" content="2016-12-20T07:14:08.290Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="koa-响应(Response)"><meta name="twitter:description" content="Koa Response 对象是对 node 的 response 进一步抽象和封装，提供了日常 HTTP 服务器开发中一些有用的功能。"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:"undefined",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2016/12/08/nodejs-koa-response/"><title> koa-响应(Response) | Mr.Hua's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Mr.Hua's Blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">To Reload Some Important Article</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-commonweal"><a href="/404.html" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br> 公益404</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/08/nodejs-koa-response/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr.Hua"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mr.Hua's Blog"> <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="Mr.Hua's Blog" src=""></span></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> koa-响应(Response)</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-08T16:46:09+08:00">2016-12-08</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/nodejs/" itemprop="url" rel="index"><span itemprop="name">nodejs</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><a href="/2016/12/08/nodejs-koa-response/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2016/12/08/nodejs-koa-response/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>Koa Response 对象是对 node 的 response 进一步抽象和封装，提供了日常 HTTP 服务器开发中一些有用的功能。<br><a id="more"></a></p><h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="res-header"><a href="#res-header" class="headerlink" title="res.header"></a>res.header</h2><p>Response header 对象。</p><h2 id="res-socket"><a href="#res-socket" class="headerlink" title="res.socket"></a>res.socket</h2><p>Request socket。</p><h2 id="res-status"><a href="#res-status" class="headerlink" title="res.status"></a>res.status</h2><p>获取 response status。不同于 node 在默认情况下 res.statusCode 为200，res.status 并没有赋值。</p><h2 id="res-statusString"><a href="#res-statusString" class="headerlink" title="res.statusString"></a>res.statusString</h2><p>Response status 字符串。</p><h2 id="res-status-1"><a href="#res-status-1" class="headerlink" title="res.status="></a>res.status=</h2><p>通过 数字状态码或者不区分大小写的字符串来设置response status：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">100 <span class="string">"continue"</span></div><div class="line">101 <span class="string">"switching protocols"</span></div><div class="line">102 <span class="string">"processing"</span></div><div class="line">200 <span class="string">"ok"</span></div><div class="line">201 <span class="string">"created"</span></div><div class="line">202 <span class="string">"accepted"</span></div><div class="line">203 <span class="string">"non-authoritative information"</span></div><div class="line">204 <span class="string">"no content"</span></div><div class="line">205 <span class="string">"reset content"</span></div><div class="line">206 <span class="string">"partial content"</span></div><div class="line">207 <span class="string">"multi-status"</span></div><div class="line">300 <span class="string">"multiple choices"</span></div><div class="line">301 <span class="string">"moved permanently"</span></div><div class="line">302 <span class="string">"moved temporarily"</span></div><div class="line">303 <span class="string">"see other"</span></div><div class="line">304 <span class="string">"not modified"</span></div><div class="line">305 <span class="string">"use proxy"</span></div><div class="line">307 <span class="string">"temporary redirect"</span></div><div class="line">400 <span class="string">"bad request"</span></div><div class="line">401 <span class="string">"unauthorized"</span></div><div class="line">402 <span class="string">"payment required"</span></div><div class="line">403 <span class="string">"forbidden"</span></div><div class="line">404 <span class="string">"not found"</span></div><div class="line">405 <span class="string">"method not allowed"</span></div><div class="line">406 <span class="string">"not acceptable"</span></div><div class="line">407 <span class="string">"proxy authentication required"</span></div><div class="line">408 <span class="string">"request time-out"</span></div><div class="line">409 <span class="string">"conflict"</span></div><div class="line">410 <span class="string">"gone"</span></div><div class="line">411 <span class="string">"length required"</span></div><div class="line">412 <span class="string">"precondition failed"</span></div><div class="line">413 <span class="string">"request entity too large"</span></div><div class="line">414 <span class="string">"request-uri too large"</span></div><div class="line">415 <span class="string">"unsupported media type"</span></div><div class="line">416 <span class="string">"requested range not satisfiable"</span></div><div class="line">417 <span class="string">"expectation failed"</span></div><div class="line">418 <span class="string">"i'm a teapot"</span></div><div class="line">422 <span class="string">"unprocessable entity"</span></div><div class="line">423 <span class="string">"locked"</span></div><div class="line">424 <span class="string">"failed dependency"</span></div><div class="line">425 <span class="string">"unordered collection"</span></div><div class="line">426 <span class="string">"upgrade required"</span></div><div class="line">428 <span class="string">"precondition required"</span></div><div class="line">429 <span class="string">"too many requests"</span></div><div class="line">431 <span class="string">"request header fields too large"</span></div><div class="line">500 <span class="string">"internal server error"</span></div><div class="line">501 <span class="string">"not implemented"</span></div><div class="line">502 <span class="string">"bad gateway"</span></div><div class="line">503 <span class="string">"service unavailable"</span></div><div class="line">504 <span class="string">"gateway time-out"</span></div><div class="line">505 <span class="string">"http version not supported"</span></div><div class="line">506 <span class="string">"variant also negotiates"</span></div><div class="line">507 <span class="string">"insufficient storage"</span></div><div class="line">509 <span class="string">"bandwidth limit exceeded"</span></div><div class="line">510 <span class="string">"not extended"</span></div><div class="line">511 <span class="string">"network authentication required"</span></div></pre></td></tr></table></figure><p></p><p>注意：不用担心记不住这些字符串，如果您设置错误，会有异常抛出，并列出该状态码表来帮助您进行更正。</p><h2 id="res-length"><a href="#res-length" class="headerlink" title="res.length="></a>res.length=</h2><p>通过给定值设置 response Content-Length。</p><h2 id="res-length-1"><a href="#res-length-1" class="headerlink" title="res.length"></a>res.length</h2><p>如果 Content-Length 作为数值存在，或者可以通过 res.body 来进行计算，则返回相应数值，否则返回 undefined。</p><h2 id="res-body"><a href="#res-body" class="headerlink" title="res.body"></a>res.body</h2><p>获得 response body。</p><h2 id="res-body-1"><a href="#res-body-1" class="headerlink" title="res.body="></a>res.body=</h2><p>设置 response body 为如下值：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">string written</div><div class="line">Buffer written</div><div class="line">Stream piped</div><div class="line"><span class="built_in">Object</span> json-stringified</div><div class="line"><span class="literal">null</span> no content response</div></pre></td></tr></table></figure><p></p><p>如果 res.status 没有赋值，Koa会自动设置为 200 或 204。</p><ul><li>String</li></ul><p>Content-Type 默认为 text/html 或者 text/plain，两种默认 charset 均为 utf-8。 Content-Length 同时会被设置。</p><ul><li>Buffer</li></ul><p>Content-Type 默认为 application/octet-stream，Content-Length同时被设置。</p><ul><li>Stream</li></ul><p>Content-Type 默认为 application/octet-stream。</p><ul><li>Object</li></ul><p>Content-Type 默认为 application/json。</p><h2 id="res-get-field"><a href="#res-get-field" class="headerlink" title="res.get(field)"></a>res.get(field)</h2><p>获取 response header 中字段值，field 不区分大小写。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> etag = <span class="keyword">this</span>.get(<span class="string">'ETag'</span>);</div><div class="line">res.set(field, value)</div></pre></td></tr></table></figure><p></p><p>设置 response header 字段 field 的值为 value。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.set(<span class="string">'Cache-Control'</span>, <span class="string">'no-cache'</span>);</div><div class="line">res.set(fields)</div></pre></td></tr></table></figure><p></p><p>使用对象同时设置 response header 中多个字段的值。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.set(&#123;</div><div class="line">  <span class="string">'Etag'</span>: <span class="string">'1234'</span>,</div><div class="line">  <span class="string">'Last-Modified'</span>: date</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><h2 id="res-remove-field"><a href="#res-remove-field" class="headerlink" title="res.remove(field)"></a>res.remove(field)</h2><p>移除 response header 中字段 filed。</p><h2 id="res-type"><a href="#res-type" class="headerlink" title="res.type"></a>res.type</h2><p>获取 response Content-Type，不包含像 “charset” 这样的参数。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ct = <span class="keyword">this</span>.type;</div><div class="line"><span class="comment">// =&gt; "image/png"</span></div></pre></td></tr></table></figure><p></p><h2 id="res-type-1"><a href="#res-type-1" class="headerlink" title="res.type="></a>res.type=</h2><p>通过 mime 类型的字符串或者文件扩展名设置 response Content-Type<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.type = <span class="string">'text/plain; charset=utf-8'</span>;</div><div class="line"><span class="keyword">this</span>.type = <span class="string">'image/png'</span>;</div><div class="line"><span class="keyword">this</span>.type = <span class="string">'.png'</span>;</div><div class="line"><span class="keyword">this</span>.type = <span class="string">'png'</span>;</div></pre></td></tr></table></figure><p></p><p>注意：当可以根据 res.type 确定一个合适的 charset 时，charset 会自动被赋值。 比如 res.type = ‘html’ 时，charset 将会默认设置为 “utf-8”。然而当完整定义为 res.type = ‘text/html’时，charset 不会自动设置。</p><h2 id="res-redirect-url-alt"><a href="#res-redirect-url-alt" class="headerlink" title="res.redirect(url, [alt])"></a>res.redirect(url, [alt])</h2><p>执行 [302] 重定向到对应 url。</p><p>字符串 “back” 是一个特殊参数，其提供了 Referrer 支持。当没有Referrer时，使用 alt 或者 / 代替。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.redirect(<span class="string">'back'</span>);</div><div class="line"><span class="keyword">this</span>.redirect(<span class="string">'back'</span>, <span class="string">'/index.html'</span>);</div><div class="line"><span class="keyword">this</span>.redirect(<span class="string">'/login'</span>);</div><div class="line"><span class="keyword">this</span>.redirect(<span class="string">'http://google.com'</span>);</div></pre></td></tr></table></figure><p></p><p>如果想要修改默认的 [302] 状态，直接在重定向之前或者之后执行即可。如果要修改 body，需要在重定向之前执行。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.status = <span class="number">301</span>;</div><div class="line"><span class="keyword">this</span>.redirect(<span class="string">'/cart'</span>);</div><div class="line"><span class="keyword">this</span>.body = <span class="string">'Redirecting to shopping cart'</span>;</div><div class="line">res.attachment([filename])</div></pre></td></tr></table></figure><p></p><p>设置 “attachment” 的 Content-Disposition，用于给客户端发送信号来提示下载。filename 为可选参数，用于指定下载文件名。</p><h2 id="res-headerSent"><a href="#res-headerSent" class="headerlink" title="res.headerSent"></a>res.headerSent</h2><p>检查 response header 是否已经发送，用于在发生错误时检查客户端是否被通知。</p><h2 id="res-lastModified"><a href="#res-lastModified" class="headerlink" title="res.lastModified"></a>res.lastModified</h2><p>如果存在 Last-Modified，则以 Date 的形式返回。</p><h2 id="res-lastModified-1"><a href="#res-lastModified-1" class="headerlink" title="res.lastModified="></a>res.lastModified=</h2><p>以 UTC 格式设置 Last-Modified。您可以使用 Date 或 date 字符串来进行设置。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.response.lastModified = <span class="keyword">new</span> <span class="built_in">Date</span>();</div></pre></td></tr></table></figure><p></p><h2 id="res-etag"><a href="#res-etag" class="headerlink" title="res.etag="></a>res.etag=</h2><p>设置 包含 “s 的 ETag。注意没有对应的 res.etag 来获取其值。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.response.etag = crypto.createHash(<span class="string">'md5'</span>).update(<span class="keyword">this</span>.body).digest(<span class="string">'hex'</span>);</div></pre></td></tr></table></figure><p></p><h2 id="res-append-field-val"><a href="#res-append-field-val" class="headerlink" title="res.append(field, val)"></a>res.append(field, val)</h2><p>在 header 的 field 后面 追加 val。</p><h2 id="res-vary-field"><a href="#res-vary-field" class="headerlink" title="res.vary(field)"></a>res.vary(field)</h2><p>相当于执行res.append(‘Vary’, field)。</p></div><div></div><div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/koa/" rel="tag"># koa</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2016/12/08/nodejs-koa-request/" rel="next" title="koa-请求(Request)"><i class="fa fa-chevron-left"></i> koa-请求(Request)</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2016/12/13/angular-jqlite/" rel="prev" title="Angular.element和$document的使用方法分析，代替jquery">Angular.element和$document的使用方法分析，代替jquery<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="ds-thread" data-thread-key="<%- page.path %>" data-title="<%- page.title %>" data-url="<%- page.permalink %>"></div><script type="text/javascript">var duoshuoQuery={short_name:"yuzhiyun"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Mr.Hua"><p class="site-author-name" itemprop="name">Mr.Hua</p><p class="site-description motion-element" itemprop="description">About My Work Daily</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">56</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories"><span class="site-state-item-count">21</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">25</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/your-user-name" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://twitter.com/your-user-name" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span><span class="links-of-author-item"><a href="http://weibo.com/your-user-name" target="_blank" title="微博"><i class="fa fa-fw fa-globe"></i> 微博</a></span><span class="links-of-author-item"><a href="http://douban.com/people/your-user-name" target="_blank" title="豆瓣"><i class="fa fa-fw fa-globe"></i> 豆瓣</a></span><span class="links-of-author-item"><a href="http://www.zhihu.com/people/your-user-name" target="_blank" title="知乎"><i class="fa fa-fw fa-globe"></i> 知乎</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#API"><span class="nav-number">1.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#res-header"><span class="nav-number">1.1.</span> <span class="nav-text">res.header</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-socket"><span class="nav-number">1.2.</span> <span class="nav-text">res.socket</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-status"><span class="nav-number">1.3.</span> <span class="nav-text">res.status</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-statusString"><span class="nav-number">1.4.</span> <span class="nav-text">res.statusString</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-status-1"><span class="nav-number">1.5.</span> <span class="nav-text">res.status=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-length"><span class="nav-number">1.6.</span> <span class="nav-text">res.length=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-length-1"><span class="nav-number">1.7.</span> <span class="nav-text">res.length</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-body"><span class="nav-number">1.8.</span> <span class="nav-text">res.body</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-body-1"><span class="nav-number">1.9.</span> <span class="nav-text">res.body=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-get-field"><span class="nav-number">1.10.</span> <span class="nav-text">res.get(field)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-remove-field"><span class="nav-number">1.11.</span> <span class="nav-text">res.remove(field)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-type"><span class="nav-number">1.12.</span> <span class="nav-text">res.type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-type-1"><span class="nav-number">1.13.</span> <span class="nav-text">res.type=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-redirect-url-alt"><span class="nav-number">1.14.</span> <span class="nav-text">res.redirect(url, [alt])</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-headerSent"><span class="nav-number">1.15.</span> <span class="nav-text">res.headerSent</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-lastModified"><span class="nav-number">1.16.</span> <span class="nav-text">res.lastModified</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-lastModified-1"><span class="nav-number">1.17.</span> <span class="nav-text">res.lastModified=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-etag"><span class="nav-number">1.18.</span> <span class="nav-text">res.etag=</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-append-field-val"><span class="nav-number">1.19.</span> <span class="nav-text">res.append(field, val)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#res-vary-field"><span class="nav-number">1.20.</span> <span class="nav-text">res.vary(field)</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2017</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Mr.Hua</span></div><div class="powered-by"> 由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">var duoshuoQuery={short_name:"huajiang1989"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script><script src="/js/src/hook-duoshuo.js"></script></body></html>