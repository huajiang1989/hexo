<!DOCTYPE html><html><head><title> r.js 配置文件 example.build.js 不完整注释 | Mr.Hua&#39;s Blog</title><link rel="icon shortcut" type="image/ico" href="/img/favicon.png"><link rel="icon" sizes="192x192" href="/img/favicon.png"><link rel="apple-touch-icon" href="/img/favicon.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#0097A7"><meta name="author" content="Mr.Hua"><meta name="description" content="About My Work Daily"><meta name="keywords" content="null"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content="Title"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="480"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Mr.Hua&#39;s Blog"><meta property="og:url" content="http://yoursite.com"><meta property="og:type" content="blog"><meta property="og:title" content="r.js 配置文件 example.build.js 不完整注释 | Mr.Hua&#39;s Blog"><meta property="og:description" content="About My Work Daily"><!--[if lte IE 9]><link rel="stylesheet" href="/css/ie-blocker.css"><script src="/js/ie-blocker.en.js"></script><![endif]--><link rel="stylesheet" href="/css/material.min.css"><link rel="stylesheet" href="/css/style.min.css"><style>body,html{font-family:Roboto,"Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif}a{color:#00838F}#scheme-Paradox .hot_tags-count,#scheme-Paradox .sidebar-colored .sidebar-badge,#scheme-Paradox .sidebar-colored .sidebar-header,#scheme-Paradox .sidebar_archives-count,#search-form-label:after,#search-label,.mdl-card__media{background-color:#0097A7!important}#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus,#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover{color:#0097A7!important}#ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a,#post_entry-right-info,.sidebar-colored .sidebar-nav li:hover>a,.sidebar-colored .sidebar-nav li:hover>a i,.sidebar-colored .sidebar-nav li>a:focus i,.sidebar-colored .sidebar-nav li>a:hover,.sidebar-colored .sidebar-nav li>a:hover i,.sidebar-colored .sidebar-nav>.open>a,.sidebar-colored .sidebar-nav>.open>a:focus,.sidebar-colored .sidebar-nav>.open>a:hover{color:#0097A7!important}.toTop{background:#757575!important}.material-layout .material-index>.material-nav,.material-layout .material-post>.material-nav,.material-nav a{color:#757575}#scheme-Paradox .MD-burger-layer{background-color:#757575}#scheme-Paradox #post-toc-trigger-btn{color:#757575}.post-toc a:hover{color:#00838F;text-decoration:underline}</style><style>body{background-color:#F5F5F5}#scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{background-color:#fff}</style><style>.fade{transition:all .8s linear;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:1}.fade.out{opacity:0}</style><script src="/js/jquery.min.js"></script><link rel="stylesheet" href="/css/highlight/obsidian.css"><script>var agent=navigator.userAgent.toLowerCase();agent.indexOf("ucbrowser")>0&&(document.write('<link rel="stylesheet" href="/css/uc.css">'),alert("由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。"))</script></head><body id="scheme-Paradox"><div class="material-layout mdl-js-layout has-drawer is-upgraded"><main class="material-layout__content" id="main"><div id="top"></div> <button class="MD-burger-icon sidebar-toggle"><span class="MD-burger-layer"></span></button> <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon"> <i class="material-icons">format_list_numbered</i></button><ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn"></ul><div class="material-post_container"><div class="material-post mdl-grid"><div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col"><div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50"><script>var randomNum;randomNum=Math.floor(5*Math.random()+1),$(".post_thumbnail-random").css("background-image","url(/img/random/"+randomNum+".png)")</script><p class="article-headline-p"> r.js 配置文件 example.build.js 不完整注释</p></div><div class="mdl-color-text--grey-700 mdl-card__supporting-text meta"><div id="author-avatar"> <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"></div><div> <strong>Mr.Hua</strong> <span>Dec 07, 2016</span></div><div class="section-spacer"></div> <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"> <i class="material-icons" role="presentation">bookmark</i> <span class="visuallyhidden">bookmark</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button"><li class="mdl-menu__item"> <a class="post_tag-link" href="/tags/r-js/">r.js</a></li></ul> <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"> <i class="material-icons" role="presentation">share</i> <span class="visuallyhidden">share</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button"><a class="post_share-link" href="https://twitter.com/intent/tweet?text=r.js 配置文件 example.build.js 不完整注释&url=http://yoursite.com//2016/12/07/rjs-example-demo/index.html&via=Mr.Hua" target="_blank"><li class="mdl-menu__item"> شارك على Twitter</li></a><a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com//2016/12/07/rjs-example-demo/index.html" target="_blank"><li class="mdl-menu__item"> شارك على Google+</li></a><a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=r.js 配置文件 example.build.js 不完整注释&url=http://yoursite.com//2016/12/07/rjs-example-demo/index.html&pic=&searchPic=false&style=simple" target="_blank"><li class="mdl-menu__item"> شارك على Weibo</li></a></ul></div><div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out"><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/*</span></div><div class="line"> * This is an example build file that demonstrates how to use the build system for</div><div class="line"> * require.js.</div><div class="line"> *</div><div class="line"> *</div><div class="line"> * r.js 配置文件 example.build.js 不完整注释\</div><div class="line"> * 结合最近打包实践，对这个 r.js 下的 build 配置文件作了些补充说明：</div><div class="line"> *</div><div class="line"> *</div><div class="line"> * THIS BUILD FILE WILL NOT WORK. It is referencing paths that probably</div><div class="line"> * do not exist on your machine. Just use it as a guide.</div><div class="line"> *</div><div class="line"> *</div><div class="line"> */</div><div class="line"></div><div class="line">(&#123;</div><div class="line">    <span class="comment">// app顶级目录，非必选项。如果指定值，baseUrl则会以此为相对路径</span></div><div class="line">    appDir: <span class="string">"some/path/"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 模块根目录。默认情况下所有模块资源都相对此目录。</span></div><div class="line">    <span class="comment">// 若该值未指定，模块则相对build文件所在目录。</span></div><div class="line">    <span class="comment">// 若appDir值已指定，模块根目录baseUrl则相对appDir。</span></div><div class="line">    baseUrl: <span class="string">"./"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 配置文件目录</span></div><div class="line">    mainConfigFile: <span class="string">'../some/path/to/main.js'</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 设置模块别名</span></div><div class="line">    <span class="comment">// RequireJS 2.0 中可以配置数组，顺序映射，当前面模块资源未成功加载时可顺序加载后续资源</span></div><div class="line">    paths: &#123;</div><div class="line">        <span class="string">"foo.bar"</span>: <span class="string">"../scripts/foo/bar"</span>,</div><div class="line">        <span class="string">"baz"</span>: <span class="string">"../another/path/baz"</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 配置 CommonJS 的 package See http://requirejs.org/docs/api.html#packages for more information.</span></div><div class="line">    packagePaths: [],</div><div class="line">    <span class="attr">packages</span>: [],</div><div class="line"></div><div class="line">    <span class="comment">// 指定输出目录，若值未指定，则相对 build 文件所在目录</span></div><div class="line">    dir: <span class="string">"../some/path"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 在 RequireJS 2.0.2 中，输出目录的所有资源会在 build 前被删除</span></div><div class="line">    <span class="comment">// 值为 true 时 rebuild 更快，但某些特殊情景下可能会出现无法预料的异常</span></div><div class="line">    keepBuildDir: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 国际化配置</span></div><div class="line">    locale: <span class="string">"en-us"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// JS 文件优化方式，目前支持以下几种：</span></div><div class="line">    <span class="comment">//   uglify: （默认） 使用 UglifyJS 来压缩代码</span></div><div class="line">    <span class="comment">//   closure: 使用 Google's Closure Compiler 的简单优化模式</span></div><div class="line">    <span class="comment">//   closure.keepLines: 使用 closure，但保持换行</span></div><div class="line">    <span class="comment">//   none: 不压缩代码</span></div><div class="line">    optimize: <span class="string">"uglify"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 使用 UglifyJS 时的可配置参数</span></div><div class="line">    <span class="comment">// See https://github.com/mishoo/UglifyJS for the possible values.</span></div><div class="line">    uglify: &#123;</div><div class="line">        <span class="attr">toplevel</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">ascii_only</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">beautify</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">max_line_length</span>: <span class="number">1000</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 使用 Closure Compiler 时的可配置参数</span></div><div class="line">    closure: &#123;</div><div class="line">        <span class="attr">CompilerOptions</span>: &#123;&#125;,</div><div class="line">        <span class="attr">CompilationLevel</span>: <span class="string">'SIMPLE_OPTIMIZATIONS'</span>,</div><div class="line">        <span class="attr">loggingLevel</span>: <span class="string">'WARNING'</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// CSS 优化方式，目前支持以下几种：</span></div><div class="line">    <span class="comment">// none: 不压缩，仅合并</span></div><div class="line">    <span class="comment">// standard: 标准压缩，移除注释、换行，以及可能导致 IE 解析出错的代码</span></div><div class="line">    <span class="comment">// standard.keepLines: 除标准压缩外，保留换行</span></div><div class="line">    <span class="comment">// standard.keepComments: 除标准压缩外，保留注释 (r.js 1.0.8+)</span></div><div class="line">    <span class="comment">// standard.keepComments.keepLines: 除标准压缩外，保留注释和换行 (r.js 1.0.8+)</span></div><div class="line">    optimizeCss: <span class="string">"standard.keepLines"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 是否忽略 CSS 资源文件中的 @import 指令</span></div><div class="line">    cssImportIgnore: <span class="literal">null</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 一般用于命令行，可将多个 CSS 资源文件打包成单个 CSS 文件</span></div><div class="line">    cssIn: <span class="string">"path/to/main.css"</span>,</div><div class="line">    <span class="attr">out</span>: <span class="string">"path/to/css-optimized.css"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 处理所有的文本资源依赖项，从而避免为加载资源而产生的大量单独xhr请求</span></div><div class="line">    inlineText: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 是否开启严格模式</span></div><div class="line">    <span class="comment">// 由于很多浏览器不支持 ES5 的严格模式，故此配置默认值为 false</span></div><div class="line">    useStrict: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="comment">//Specify build pragmas. If the source files contain comments like so:</span></div><div class="line">    <span class="comment">//&gt;&gt;excludeStart("fooExclude", pragmas.fooExclude);</span></div><div class="line">    <span class="comment">//&gt;&gt;excludeEnd("fooExclude");</span></div><div class="line">    <span class="comment">//Then the comments that start with //&gt;&gt; are the build pragmas.</span></div><div class="line">    <span class="comment">//excludeStart/excludeEnd and includeStart/includeEnd work, and the</span></div><div class="line">    <span class="comment">//the pragmas value to the includeStart or excludeStart lines</span></div><div class="line">    <span class="comment">//is evaluated to see if the code between the Start and End pragma</span></div><div class="line">    <span class="comment">//lines should be included or excluded. If you have a choice to use</span></div><div class="line">    <span class="comment">//"has" code or pragmas, use "has" code instead. Pragmas are harder</span></div><div class="line">    <span class="comment">//to read, but they can be a bit more flexible on code removal vs.</span></div><div class="line">    <span class="comment">//has-based code, which must follow JavaScript language rules.</span></div><div class="line">    <span class="comment">//Pragmas also remove code in non-minified source, where has branch</span></div><div class="line">    <span class="comment">//trimming is only done if the code is minified via UglifyJS or</span></div><div class="line">    <span class="comment">//Closure Compiler.</span></div><div class="line">    pragmas: &#123;</div><div class="line">        <span class="attr">fooExclude</span>: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">//Same as "pragmas", but only applied once during the file save phase</span></div><div class="line">    <span class="comment">//of an optimization. "pragmas" are applied both during the dependency</span></div><div class="line">    <span class="comment">//mapping and file saving phases on an optimization. Some pragmas</span></div><div class="line">    <span class="comment">//should not be processed during the dependency mapping phase of an</span></div><div class="line">    <span class="comment">//operation, such as the pragma in the CoffeeScript loader plugin,</span></div><div class="line">    <span class="comment">//which wants the CoffeeScript compiler during the dependency mapping</span></div><div class="line">    <span class="comment">//phase, but once files are saved as plain JavaScript, the CoffeeScript</span></div><div class="line">    <span class="comment">//compiler is no longer needed. In that case, pragmasOnSave would be used</span></div><div class="line">    <span class="comment">//to exclude the compiler code during the save phase.</span></div><div class="line">    pragmasOnSave: &#123;</div><div class="line">        <span class="comment">//Just an example</span></div><div class="line">        excludeCoffeeScript: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">//Allows trimming of code branches that use has.js-based feature detection:</span></div><div class="line">    <span class="comment">//https://github.com/phiggins42/has.js</span></div><div class="line">    <span class="comment">//The code branch trimming only happens if minification with UglifyJS or</span></div><div class="line">    <span class="comment">//Closure Compiler is done. For more information, see:</span></div><div class="line">    <span class="comment">//http://requirejs.org/docs/optimization.html#hasjs</span></div><div class="line">    has: &#123;</div><div class="line">        <span class="string">'function-bind'</span>: <span class="literal">true</span>,</div><div class="line">        <span class="string">'string-trim'</span>: <span class="literal">false</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">//Similar to pragmasOnSave, but for has tests -- only applied during the</span></div><div class="line">    <span class="comment">//file save phase of optimization, where "has" is applied to both</span></div><div class="line">    <span class="comment">//dependency mapping and file save phases.</span></div><div class="line">    hasOnSave: &#123;</div><div class="line">        <span class="string">'function-bind'</span>: <span class="literal">true</span>,</div><div class="line">        <span class="string">'string-trim'</span>: <span class="literal">false</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 命名空间，完整实例可以参考 http://requirejs.org/docs/faq-advanced.html#rename</span></div><div class="line">    namespace: <span class="string">'foo'</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 跳过 pragmas 处理</span></div><div class="line">    skipPragmas: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="comment">//If skipModuleInsertion is false, then files that do not use define()</span></div><div class="line">    <span class="comment">//to define modules will get a define() placeholder inserted for them.</span></div><div class="line">    <span class="comment">//Also, require.pause/resume calls will be inserted.</span></div><div class="line">    <span class="comment">//Set it to true to avoid this. This is useful if you are building code that</span></div><div class="line">    <span class="comment">//does not use require() in the built project or in the JS files, but you</span></div><div class="line">    <span class="comment">//still want to use the optimization tool from RequireJS to concatenate modules</span></div><div class="line">    <span class="comment">//together.</span></div><div class="line">    skipModuleInsertion: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="comment">//Specify modules to stub out in the optimized file. The optimizer will</span></div><div class="line">    <span class="comment">//use the source version of these modules for dependency tracing and for</span></div><div class="line">    <span class="comment">//plugin use, but when writing the text into an optimized layer, these</span></div><div class="line">    <span class="comment">//modules will get the following text instead:</span></div><div class="line">    <span class="comment">//If the module is used as a plugin:</span></div><div class="line">    <span class="comment">//    define(&#123;load: function(id)&#123;throw new Error("Dynamic load not allowed: " + id);&#125;&#125;);</span></div><div class="line">    <span class="comment">//If just a plain module:</span></div><div class="line">    <span class="comment">//    define(&#123;&#125;);</span></div><div class="line">    <span class="comment">//This is useful particularly for plugins that inline all their resources</span></div><div class="line">    <span class="comment">//and use the default module resolution behavior (do *not* implement the</span></div><div class="line">    <span class="comment">//normalize() method). In those cases, an AMD loader just needs to know</span></div><div class="line">    <span class="comment">//that the module has a definition. These small stubs can be used instead of</span></div><div class="line">    <span class="comment">//including the full source for a plugin.</span></div><div class="line">    stubModules: [<span class="string">'text'</span>, <span class="string">'bar'</span>],</div><div class="line"></div><div class="line">    <span class="comment">//If it is not a one file optimization, scan through all .js files in the</span></div><div class="line">    <span class="comment">//output directory for any plugin resource dependencies, and if the plugin</span></div><div class="line">    <span class="comment">//supports optimizing them as separate files, optimize them. Can be a</span></div><div class="line">    <span class="comment">//slower optimization. Only use if there are some plugins that use things</span></div><div class="line">    <span class="comment">//like XMLHttpRequest that do not work across domains, but the built code</span></div><div class="line">    <span class="comment">//will be placed on another domain.</span></div><div class="line">    optimizeAllPluginResources: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 处理级联依赖，默认为 false，此时能够在运行时动态 require 级联的模块。为 true 时，级联模块会被一同打包</span></div><div class="line">    findNestedDependencies: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="comment">//If set to true, any files that were combined into a build layer will be</span></div><div class="line">    <span class="comment">//removed from the output folder.</span></div><div class="line">    removeCombined: <span class="literal">false</span>,</div><div class="line"></div><div class="line">    <span class="attr">modules</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="comment">// 模块 alias 名称</span></div><div class="line">            name: <span class="string">"foo/bar/bop"</span>,</div><div class="line"></div><div class="line">            <span class="comment">//For build profiles that contain more than one modules entry,</span></div><div class="line">            <span class="comment">//allow overrides for the properties that set for the whole build,</span></div><div class="line">            <span class="comment">//for example a different set of pragmas for this module.</span></div><div class="line">            <span class="comment">//The override's value is an object that can</span></div><div class="line">            <span class="comment">//contain any of the other build options in this file.</span></div><div class="line">            <span class="comment">//</span></div><div class="line">            override: &#123;</div><div class="line">                <span class="attr">pragmas</span>: &#123;</div><div class="line">                    <span class="attr">fooExclude</span>: <span class="literal">true</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 将 alias 别名为 foo/bar/bop 和 foo/bar/bee 的模块打包成一个文件</span></div><div class="line">        &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"foo/bar/bop"</span>,</div><div class="line">            <span class="attr">include</span>: [<span class="string">"foo/bar/bee"</span>]</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 将 foo/bar/bip 及其依赖项一并打包，但不包括 foo/bar/bop</span></div><div class="line">        &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"foo/bar/bip"</span>,</div><div class="line">            <span class="attr">exclude</span>: [</div><div class="line">                <span class="string">"foo/bar/bop"</span></div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 排除指定模块，但若该模块对所打包文件有级联依赖关系，则仍会被打包进去</span></div><div class="line">        &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"foo/bar/bin"</span>,</div><div class="line">            <span class="attr">excludeShallow</span>: [</div><div class="line">                <span class="string">"foo/bar/bot"</span></div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// insertRequire 在 RequireJS 2.0 中被引入，在 built 文件的末尾插入 require([]) 以触发模块加载并运行</span></div><div class="line">        <span class="comment">// insertRequire: ["foo/baz"] 即 require(["foo/baz"])</span></div><div class="line">        <span class="comment">// 详情见 https://github.com/jrburke/almond</span></div><div class="line">        &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"foo/baz"</span>,</div><div class="line">            <span class="attr">insertRequire</span>: [<span class="string">"foo/baz"</span>]</div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="comment">// 仅优化单个模块及其依赖项</span></div><div class="line">    name: <span class="string">"foo/bar/bop"</span>,</div><div class="line">    <span class="attr">include</span>: [<span class="string">"foo/bar/bee"</span>],</div><div class="line">    <span class="attr">insertRequire</span>: [<span class="string">'foo/bar/bop'</span>],</div><div class="line">    <span class="attr">out</span>: <span class="string">"path/to/optimized-file.js"</span>,</div><div class="line"></div><div class="line">    <span class="comment">// An alternative to "include"</span></div><div class="line">    deps: [<span class="string">"foo/bar/bee"</span>],</div><div class="line"></div><div class="line">    <span class="comment">// RequireJS 2.0 中，out 可以是一个函数</span></div><div class="line">    out: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</div><div class="line">        <span class="comment">// 自定义优化内容</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 模块包裹函数，顾名思义使用特定内容包裹模块，如此一来 define/require 就不再是全局变量，在 end 中可以暴露一些全局变量供整个函数使用</span></div><div class="line">    wrap: &#123;</div><div class="line">        <span class="attr">start</span>: <span class="string">"(function() &#123;"</span>,</div><div class="line">        <span class="attr">end</span>: <span class="string">"&#125;());"</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 另一种模块包裹方式</span></div><div class="line">    <span class="comment">// (function() &#123; + content + &#125;());</span></div><div class="line">    wrap: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 另一种模块包裹方式，包裹内容可以是指定文件</span></div><div class="line">    wrap: &#123;</div><div class="line">        <span class="attr">startFile</span>: <span class="string">"part/start.frag"</span>,</div><div class="line">        <span class="attr">endFile</span>: <span class="string">"parts/end.frag"</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 不优化某些文件</span></div><div class="line">    fileExclusionRegExp: <span class="regexp">/^\./</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 默认保留模块的 license 注释</span></div><div class="line">    preserveLicenseComments: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 设置 logging level</span></div><div class="line">    <span class="comment">// TRACE: 0,</span></div><div class="line">    <span class="comment">// INFO: 1,</span></div><div class="line">    <span class="comment">// WARN: 2,</span></div><div class="line">    <span class="comment">// ERROR: 3,</span></div><div class="line">    <span class="comment">// SILENT: 4</span></div><div class="line">    <span class="comment">// Default is 0.</span></div><div class="line">    logLevel: <span class="number">0</span>,</div><div class="line"></div><div class="line">    <span class="comment">// 在每个文件模块被读取时的操作函数，可在函数体内作适当变换</span></div><div class="line">    onBuildRead: <span class="function"><span class="keyword">function</span> (<span class="params">moduleName, path, contents</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> contents.replace(<span class="regexp">/foo/g</span>, <span class="string">'bar'</span>);</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 在每个文件模块被写入时的操作函数</span></div><div class="line">    onBuildWrite: <span class="function"><span class="keyword">function</span> (<span class="params">moduleName, path, contents</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> contents.replace(<span class="regexp">/bar/g</span>, <span class="string">'foo'</span>);</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// 若为true，优化器会强制在文件中包裹一层 define(require, exports, module) &#123;&#125;)</span></div><div class="line">    cjsTranslate: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">//Introduced in 2.0.2: a bit experimental.</span></div><div class="line">    <span class="comment">//Each script in the build layer will be turned into</span></div><div class="line">    <span class="comment">//a JavaScript string with a //@ sourceURL comment, and then wrapped in an</span></div><div class="line">    <span class="comment">//eval call. This allows some browsers to see each evaled script as a</span></div><div class="line">    <span class="comment">//separate script in the script debugger even though they are all combined</span></div><div class="line">    <span class="comment">//in the same file. Some important limitations:</span></div><div class="line">    <span class="comment">//1) Do not use in IE if conditional comments are turned on, it will cause</span></div><div class="line">    <span class="comment">//errors:</span></div><div class="line">    <span class="comment">//http://en.wikipedia.org/wiki/Conditional_comment#Conditional_comments_in_JScript</span></div><div class="line">    <span class="comment">//2) It is only useful in optimize: 'none' scenarios. The goal is to allow</span></div><div class="line">    <span class="comment">//easier built layer debugging, which goes against minification desires.</span></div><div class="line">    useSourceUrl: <span class="literal">true</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></div><link rel="stylesheet" href="/css/duoshuo.min.css"><style>#ds-thread #ds-reset .ds-post-button{background-color:#0097A7!important}#ds-wrapper #ds-reset .ds-icons-32{background-color:#0097A7!important}#ds-reset .ds-highlight{color:#0097A7!important}</style><div id="comments"><div class="ds-thread" data-thread-key="2016/12/07/rjs-example-demo/" data-url="http://yoursite.com/2016/12/07/rjs-example-demo/" data-title="r.js 配置文件 example.build.js 不完整注释"></div></div></div><nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col"> <a href="/2016/12/07/node-mongoose/" id="post_nav-newer" class="prev-content"><button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"> <i class="material-icons">arrow_back</i></button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; أحدث</a><div class="section-spacer"></div> <a href="/2016/12/07/rjs-help/" id="post_nav-older" class="next-content">أقدم &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"> <i class="material-icons">arrow_forward</i></button></a></nav></div></div><div class="sidebar-overlay"></div><aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation"><div id="sidebar-main"><div class="sidebar-header header-cover" style="background-image:url(/img/sidebar_header.png)"><div class="top-bar"></div> <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display:initial" data-upgraded=",MaterialButton,MaterialRipple"> <i class="material-icons">clear_all</i><span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button><div class="sidebar-image"> <img src="/img/avatar.png" alt="Mr.Hua's avatar"></div> <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">472970338@qq.com<b class="caret"></b></a></div><ul class="nav sidebar-nav"><li class="dropdown"><ul id="settings-dropdown" class="dropdown-menu"><li> <a href="#" target="_blank" title="Email Me"><i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i> Email Me</a></li></ul></li><li id="sidebar-first-li"> <a href="/" target="_self"><i class="material-icons sidebar-material-icons">home</i> الرئيسية</a></li><li class="dropdown"> <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown"><i class="material-icons sidebar-material-icons">inbox</i> أرشيف<b class="caret"></b></a><ul class="dropdown-menu"><li> <a class="sidebar_archives-link" href="/archives/2017/02/">February 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">January 2017<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">December 2016<span class="sidebar_archives-count">42</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">November 2016<span class="sidebar_archives-count">4</span></a></li></ul></li><li class="divider"></li><li> <a href="/archives" title="archives">archives</a></li><li> <a href="/tags" title="tags">tags</a></li><li> <a href="/archives">رقم المقالة <span class="sidebar-badge">57</span></a></li></ul><div class="sidebar-divider"></div><a href="https://github.com/viosey/hexo-theme-material" class="sidebar-footer-text-a" target="_blank"><div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple"> سمة - Material <span class="sidebar-badge badge-circle">i</span></div></a></div></aside><div class="toTop-wrap"> <a href="#top" class="toTop"><i class="material-icons footer_top-i">expand_less</i></a></div><footer class="mdl-mini-footer" id="bottom"><div class="mdl-mini-footer--left-section sns-list"> <a href="https://twitter.com/twitter" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(/img/footer/footer_ico-twitter.png)"> <span class="visuallyhidden">Twitter</span></button></a> <a href="https://www.facebook.com/facebook" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(/img/footer/footer_ico-facebook.png)"> <span class="visuallyhidden">Facebook</span></button></a> <a href="https://www.google.com/" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(/img/footer/footer_ico-gplus.png)"> <span class="visuallyhidden">Google Plus</span></button></a></div><div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd=new Date;document.write(fd.getFullYear())</script>&nbsp;Mr.Hua's Blog</div><div class="mdl-mini-footer--right-section"><div><div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div><div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div></div></div></footer><script src="/js/highlight.min.js"></script><script src="/js/js.min.js"></script><script src="/js/nprogress.js"></script><script type="text/javascript">NProgress.configure({showSpinner:!0}),NProgress.start(),$("#nprogress .bar").css({background:"#FF4081"}),$("#nprogress .peg").css({"box-shadow":"0 0 10px #FF4081, 0 0 15px #FF4081"}),$("#nprogress .spinner-icon").css({"border-top-color":"#FF4081","border-left-color":"#FF4081"}),setTimeout(function(){NProgress.done(),$(".fade").removeClass("out")},800)</script><script type="text/javascript">var duoshuoQuery={short_name:"huajiang1989"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>$(window).load(function(){$(".post-toc-wrap").parent(".mdl-menu__container").css("position","fixed")})</script></main></div></body></html>